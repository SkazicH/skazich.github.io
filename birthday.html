<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vabilo na rojstnodnevno kosilo</title>
    <style>
        /* Define a custom font */
        @font-face {
            font-family: 'Pacifico';
            src: url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');
        }

        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background-color: #ffffff; /* White background */
            color: #333333; /* Dark grey text */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .invitation {
            background-color: #dcdcdc; /* Light grey background */
            border: 4px solid #007bff; /* Blue border */
            color: #333333; /* Dark grey text */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 90%;
            transition: transform 0.3s;
        }
        .invitation:hover {
            transform: scale(1.02);
        }
        h1, h2 {
            font-family: 'Pacifico', cursive; /* Apply the custom font */
        }
        h1 {
            color: #007bff; /* Blue header text */
        }
        h2 {
            color: #333333; /* Dark grey subheader text */
        }
        p {
            font-size: 18px;
            color: #555555; /* Grey text */
        }
        .btn-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
        }
        .confirm-btn {
            background-color: #007bff; /* Blue button */
            color: #ffffff; /* White button text */
        }
        .confirm-btn:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }
        .decline-btn {
            background-color: #333333; /* Grey button */
            color: #ffffff; /* White button text */
        }
        .decline-btn:hover {
            background-color: #000000; /* Black on hover */
        }
        button:focus {
            outline: none;
        }
        #confirmation-status {
            font-size: 16px;
            font-weight: bold;
            margin-top: 20px;
            color: #007bff; /* Blue text for confirmation status */
        }
        #name-input {
            font-size: 16px;
            margin: 10px;
            padding: 5px;
            border: 1px solid #333333; /* Dark grey border */
            border-radius: 5px;
            color: #333333; /* Dark grey text */
        }
        /* Hide the map initially */
        #map-container {
            display: none;
        }
        /* Style the link as a button */
        #show-map {
            cursor: pointer;
            color: #007bff; /* Blue link color */
            text-decoration: underline;
            font-weight: bold;
        }
        /* Make "Vaše ime" (Your Name) stand out more */
        label[for="name-input"] {
            font-weight: bold;
            color: #007bff; /* Blue label text */
        }
    </style>
</head>
<body>
    <div class="invitation">
        <h1>Vabljeni!</h1>
        <p>Pridružite se mi na rojstnodnevnem kosilu:</p>
        <h2>Gašper Skaza</h2>
        <p>Datum: 21.10.2023<br>Čas: 13:00<br>Kraj: <span id="show-map">Gostišče Kolar</span></p>
        <p>Prosimo, odgovorite do 5.10.2023.</p>
        <label for="name-input">Vaše ime:</label>
        <input type="text" id="name-input">
        <div class="btn-container">
            <button class="confirm-btn" onclick="confirmRSVP()">Potrdi</button>
            <button class="decline-btn" onclick="declineRSVP()">Odpovej</button>
        </div>
        <div id="confirmation-status"></div>

        <!-- Google Maps iframe code -->
        <div id="map-container">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2758.1432607519932!2d15.315426976318163!3d46.26725717109852!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47657a0524c8aa01%3A0x5a1f07ebabfc3faf!2sGostilna%20Kolar%2C%20Dejan%20Kolar%20s.p.!5e0!3m2!1sen!2ssi!4v1695487986170!5m2!1sen!2ssi" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </div>

    <script>
        // Function to toggle map visibility
        document.getElementById('show-map').addEventListener('click', function () {
            const mapContainer = document.getElementById('map-container');
            if (mapContainer.style.display === 'none') {
                mapContainer.style.display = 'block';
            } else {
                mapContainer.style.display = 'none';
            }
        });

        // Function for confirming RSVP
        function confirmRSVP() {
            const name = document.getElementById('name-input').value;
            if (!name) {
                alert('Prosimo, vpišite vaše ime pred potrditvijo.');
                return;
            }

            // Send an AJAX request to log the RSVP response
            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/log_rsvp', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    displayConfirmationPopup(`Hvala, ${name}, za potrditev udeležbe! Veselim se praznovanja s tabo!`);
                }
            };
            xhr.send(`name=${encodeURIComponent(name)}&response=Potrdi`);
        }

        // Function for declining RSVP
        function declineRSVP() {
            const name = document.getElementById('name-input').value;
            if (!name) {
                alert('Prosimo, vpišite vaše ime pred odpovedjo.');
                return;
            }

            // Send an AJAX request to log the RSVP response
            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/log_rsvp', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    displayConfirmationPopup(`Hvala, ${name}, za odgovor.`);
                }
            };
            xhr.send(`name=${encodeURIComponent(name)}&response=Odpovej`);
        }

        // Function for displaying confirmation popup
        function displayConfirmationPopup(message) {
            alert(message);
        }
    </script>
</body>
</html>
